<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="BrowserX.Settings.StartItem"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:BrowserX.Settings"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    mc:Ignorable="d">
    <ScrollView>
        <StackPanel
            Spacing="{StaticResource NavigationViewFrameSpacing}"
            Margin="{StaticResource NavigationViewFrameMargin}">
            <TextBlock Text="启动时"
                       Style="{ThemeResource FlyoutPickerTitleTextBlockStyle}"
                       Margin="5,10,0,0"/>

            <controls:SettingsCard
                ContentAlignment="Vertical"
                HorizontalAlignment="Stretch"
                HorizontalContentAlignment="Stretch">
                <Grid
                    RowSpacing="10">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <RadioButtons
                        SelectedIndex="{x:Bind Profile.StartBehavior, Mode=TwoWay}"
                        SelectionChanged="WebsiteBehaviorChanged">
                        <RadioButton Content="打开新标签页"/>
                        <RadioButton Content="打开上一个会话中的标签页"/>
                        <RadioButton Content="打开自定义网站"/>
                    </RadioButtons>
                
                    <Grid
                        Visibility="{x:Bind IsCustomWebsiteVisible(Profile.StartBehavior), Mode=OneWay}"
                        ColumnSpacing="10"
                        Grid.Row="1"
                        Margin="80,0,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                
                        <TextBox
                            Grid.Column="0"
                            Name="UriBox"
                            Text="{x:Bind Profile.SpecificUri, Mode=TwoWay}"
                            PlaceholderText="输入 URL"/>
                        <Button
                            Grid.Column="1"
                            Content="确定"
                            Click="CheckUri"/>
                    </Grid>
                </Grid>
            </controls:SettingsCard>

            <controls:SettingsCard
                Header='在工具栏上显示"首页"按钮'>
                <ToggleSwitch IsOn="{x:Bind IsHomeButtonOn, Mode=TwoWay}"/>
            </controls:SettingsCard>

            <controls:SettingsCard
                Header="选择搜索引擎">
                <ComboBox
                    ItemsSource="{x:Bind SearchEngines}"
                    SelectedItem="{x:Bind Profile.SearchEngine, Mode=TwoWay}"/>
            </controls:SettingsCard>

            <TextBlock Text="新标签页"
                       Style="{ThemeResource FlyoutPickerTitleTextBlockStyle}"
                       Margin="5,10,0,0"/>

            <controls:SettingsExpander
                Header="在新标签页显示背景图">
                <controls:SettingsExpander.Items>
                    <controls:SettingsCard
                        ContentAlignment="Vertical"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Stretch">
                        <Grid
                            RowSpacing="10">
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>
                            <RadioButtons
                                SelectedIndex="{x:Bind Profile.BackgroundBehavior, Mode=TwoWay}"
                                SelectionChanged="BackgroundBehaviorChanged">
                                <RadioButton Content="不显示背景"/>
                                <RadioButton Content="使用 Bing 每日一图"/>
                                <RadioButton Content="使用自定义背景"/>
                            </RadioButtons>

                            <Grid
                                Visibility="{x:Bind IsCustomBackgroundVisible(Profile.BackgroundBehavior), Mode=OneWay}"
                                ColumnSpacing="10"
                                Grid.Row="1"
                                Margin="80,0,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <TextBox
                                    Grid.Column="0"
                                    Name="BackgroundBox"
                                    Text="{x:Bind Profile.BackgroundLocation, Mode=TwoWay}"
                                    PlaceholderText="输入图片路径"/>
                                <Button
                                    Grid.Column="1"
                                    Content="确定"
                                    Click="SetBackgroundImage"/>
                            </Grid>
                        </Grid>
                    </controls:SettingsCard>
                </controls:SettingsExpander.Items>

            </controls:SettingsExpander>
        </StackPanel>
    </ScrollView>
</Page>
